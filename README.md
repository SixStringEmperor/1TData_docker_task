# 1TData_docker_task
# task1doker

# Задание 1 
1) В вашей команде завелся джун! Джун написал скрипт на SQL и очень этим гордится. Скрипт предназначен для аналитиков, и они очень хотят им воспользоваться — да вот проблема — проверить, как скрипт работает, они не могут, у них просто нет самой базы. Но не беда — вы точно сможете помочь товарищам! Для этого вам нужно создать dockerfile, в котором необходимо описать инструкции для развертывания СУБД Postgres и добавить в этот образ автоматический запуск скрипта от вашего коллеги-джуна. На основе данного docker-файла необходимо запустить контейнер и убедиться, что база действительно поднялась и скрипт вашего коллеги отработал
-----------------
1) Решение  
 1.1) Создаем по образу докер:
   docker build -t test_image:latest .    
 1.2) Запускаем докер  c возможностью сохранить данные
   docker run --rm --name docker_test  –p 5439:5432  -d test_image:latest    
-----------------
# Задание 2 
2) Вы справились с предыдущим заданием — прекрасно! Аналитики с удовольствием изучили табличку, которую собрал ваш коллега-джун, да вот данных в ней маловато для полноценного исследования. Джун сразу же побежал ручками менять скрипт, но вы его остановили. Теперь вам необходимо написать специальную команду docker, которая позволит подключаться к работающему контейнеру, запускать интерфейс psql и вносить новые данные «на лету».
-----------------
2) Решение  
   a)  
   docker exec -it docker_test bash (docker exec -it <container-name> bash)  
   далее   
   psql -U dataBaseUserName dataBaseName  
   psql -U Roman db_test  
   далее  
   - DDL
   «`{SQL} {CREATE TABLE IF NOT EXISTS public.users (
    user_id BIGINT,
    name VARCHAR,
    pasport_id BIGINT);}«`
   - DML
   «`{SQL} {INSERT INTO public.users (user_id, name, pasport_id) VALUES
    (1, 'Roman', 19723),
    (2, 'Sergey', 15163),
    (3, 'Olga', 19152);}«`
   
   b)
     docker exec -it docker_test psql -U postgres
-----------------
# Задание 3 
3) Случилось неладное — ваш коллега-джун случайно удалил ваш прекрасно работающий контейнер. Вы, конечно же, поспешили контейнер перезапустить, да вот только новых данных, которые коллеги-аналитики добавили на предыдущем шаге, в базе не оказалось. Теперь, чтобы в будущем избежать подобных историй,  вам необходимо добавить в docker-файл специальную инструкцию, которая вызывает механизм для хранения данных в контейнере и убедиться, что он исправно работает.
-----------------
3) Решение  
docker run --rm -d --name docker_test -p 5432:5432 -v /data:/var/lib/postgresql/data test_image:latest